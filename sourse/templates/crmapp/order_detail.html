{% extends 'base.html' %}
{% load static %}
{% block css %}
    <link rel="stylesheet" href="{% static 'css/tables.css' %}">
    <style>
    .order-detail{
        max-width: 300px;
        padding: 20px;
        box-shadow: 0 0 5px black;
        margin-bottom: 10px;
    }
    .order-detail p{
        display: flex;
        justify-content: space-between;
    }
    .order-detail span{
        font-weight: bolder;
    }
    </style>
{% endblock %}
{% block page_title %}
Заказ №{{ order.id }}
{% endblock %}
{% block content %}
    <div class="container">
        <div class="order-detail">
            <h1>Заказ №{{ order.id }}</h1>
            <p><span>Стадия:</span> {{ order.get_stage_display }}</p>
            <p><span>Касса:</span> {{ order.cashbox }}</p>
            <p><span>Дата:</span> {{ order.date }}</p>
            <p><span>Время:</span> {{ order.time }}</p>
            <p><span>Клиент:</span> {{ order.client }}</p>
            <p><span>Стоимость:</span> {{ order.amount }}</p>
            <p><span>Себестоимость:</span> {{ order.cost_price }}</p>
            <p><span>Выручка:</span> {{ revenue }}</p>
            <p><span>Количество услуг:</span> {{ order.count }}</p>
        </div>
     <div class="table-container">
     <h4>
         Продукты в заказе
     </h4>
        <table>
            <thead>
                <tr>
                    <th data-label="Баркод">Баркод</th>
                    <th data-label="Артикул">Артикул</th>
                    <th data-label="Продукт">Продукт</th>
                    <th data-label="Размер">Размер</th>
                    <th data-label="Цвет">Цвет</th>
                    <th data-label="Состав">Состав</th>
                    <th data-label="Страна пр-ва">Страна пр-ва</th>
                    <th data-label="К отправке">К отправке</th>
                    <th data-label="Брак">Брак</th>
                </tr>
            </thead>
            <tbody>
                {% for product in products %}
                    <tr>
                        <td data-label="Баркод>">{{ product.product.barcode }}</td>
                        <td data-label="Артикул">{{ product.product.article }}</td>
                        <td data-label="Продукт">{{ product.product.name }}</td>
                        <td data-label="Размер">{{ product.product.color }}</td>
                        <td data-label="Цвет">{{ product.product.size }}</td>
                        <td data-label="Состав">{{ product.product.composition }}</td>
                        <td data-label="Страна пр-ва">{{ product.product.country }}</td>
                        <td data-label="К отправке">{{ product.product.good_quality }}</td>
                        <td data-label="Брак">{{ product.product.defective }}</td>
                {% empty %}
                        <td>No order services found.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        </div>
        <div class="table-container">
        <h4>Услуги в заказе</h4>
        <table>
            <thead>
                <tr>
                    <th data-label="Услуга">Услуга</th>
                    <th data-label="Код">Код</th>
                    <th data-label="Цена за ед">Цена за ед</th>
                    <th data-label="Общая цена">Общая цена</th>
                    <th data-label="Количество">Количество</th>
                </tr>
            </thead>
            <tbody>
                {% for order_service in services %}
                    <tr>
                        <td data-label="Услуга">{{ order_service.service }}</td>
                        <td data-label="Код">{{ order_service.service.id }}</td>
                        <td data-label="Цена за ед">{{ order_service.service.price }}</td>
                        <td data-label="Общая цена">{{ order_service.price }}</td>
                        <td data-label="Количество">{{ order_service.count }}</td>
                {% empty %}
                        <td>No order services found.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

    </div>
    <div class="table-container">
        <h4>Расходные материалы</h4>
        <table>
  <thead>
        <tr>
          <th data-label="Расходник">Расходник</th>
          <th data-label="Тип">Тип</th>
          <th data-label="Цена за ед.">Цена за ед.</th>
          <th data-label="Кол-во">Кол-во</th>
          <th data-label="Стоимость">Стоимость</th>
        </tr>
      </thead>
      <tbody>

        {% for consumable in consumables_in_order %}
            <tr>
              <td data-label="Расходник">{{ consumable.consumable.name }}</td>
              <td data-label="Тип">{{ consumable.count }}</td>
              <td data-label="Цена за ед.">{{ consumable.consumable.price }}</td>
              <td data-label="Кол-во">{{ consumable.count }}</td>
              <td data-label="Стоимость">{{ consumable.price }}</td>
            </tr>
          {% endfor %}
      </tbody>
    </table>

    </div>
    </div>
{% endblock %}
